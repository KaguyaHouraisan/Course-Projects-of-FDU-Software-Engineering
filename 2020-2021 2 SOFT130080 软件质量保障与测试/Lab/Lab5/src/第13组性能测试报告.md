# 第13组性能测试报告

### 一、任务分工

XXX：存款、转账、借据录入、新增汇票的脚本、测试用例编写

XXX： 查看理财产品购买情况的脚本、测试用例编写

XXX：执行系统的性能测试

XXX：测试结果数据整理、文档撰写



### 二、测试用例设计

#### 2.1 存款

| 用例描述   | 模拟并发压力较大的业务“存款”进行性能测试                     |
| ---------- | ------------------------------------------------------------ |
| 操作流程   | 1） 登录  2） 输入存折/银行卡、输入金额、交易代码  3） 提交存款 |
| 场景设置   | 限定thinktime时间为0；  循环交易时间无时间间隔；  在启动测试前初始化所有用户 |
| 前提和约束 | 登录成功，输入存折/银行卡、输入金额、交易代码正确            |

#### 2.2 转账

| 用例描述   | 模拟并发压力较大的业务“转账”进行性能测试                     |
| ---------- | ------------------------------------------------------------ |
| 操作流程   | 1） 登录  2） 输入存折/银行卡、交易密码、收款账号、输入金额、交易代码  3） 提交转账 |
| 场景设置   | 限定thinktime时间为0；  循环交易时间无时间间隔；  在启动测试前初始化所有用户 |
| 前提和约束 | 登录成功，输入存折/银行卡、交易密码、收款账号、输入金额、交易代码正确，存折/银行卡中有足够的余额 |

#### 2.3 借据录入

| 用例描述   | 模拟并发压力较大的业务“借据录入”进行性能测试                 |
| ---------- | :----------------------------------------------------------- |
| 操作流程   | 1） 登录  2） 输入贷款账号、合同编号、贷款产品、交易代码、合同金额、贷款相关费用、贷款用途、还款方式、贷款方式、贷款期限、贷款年利率  3） 提交存款 |
| 场景设置   | 限定thinktime时间为0；  循环交易时间无时间间隔；  在启动测试前初始化所有用户 |
| 前提和约束 | 登录成功，输入贷款账号、合同编号、贷款产品、交易代码、合同金额、贷款相关费用、贷款用途、还款方式、贷款方式、贷款期限、贷款年利率正确 |

#### 2.4 新增汇票

| 用例描述   | 模拟并发压力较大的业务“新增汇票”进行性能测试                 |
| ---------- | ------------------------------------------------------------ |
| 操作流程   | 1） 登录  2） 输入申请人账号、收款账号、金额大写、付款期限  3） 提交存款 |
| 场景设置   | 限定thinktime时间为0；  循环交易时间无时间间隔；  在启动测试前初始化所有用户 |
| 前提和约束 | 登录成功，输入申请人账号、收款账号、金额大写、付款期限正确   |

#### 2.5 查看理财产品购买情况（Lab1实现，本地部署）

| 用例描述   | 模拟Lab1中实现的并发压力较大的业务“查看理财产品”，进行性能测试 |
| ---------- | ------------------------------------------------------------ |
| 操作流程   | 1） 登录  2） 输入查看理财产品的账户号  3） 查看理财产品列表 |
| 场景设置   | 限定thinktime时间为0；  循环无时间间隔；  在启动测试前初始化用户账户，保证有足够余额通过账户信用等级评测  在启动测试前初始化各类理财产品 |
| 前提和约束 | 登录成功，输入账户号正确，账户号中有足够的余额，超过未缴纳贷款以及罚金 |

### 三、测试结果

#### 3.1 存款

| 并发数 | 样本 | 平均值 | 中位数 | 90%百分位 | 95%百分位 | 99%百分位 | 最小值 | 最大值 | 异常% | 吞吐量 | 接收KB/s | 发送KB /s |
| ------ | ---- | ------ | ------ | --------- | --------- | --------- | ------ | ------ | ----- | ------ | -------- | --------- |
| 50     | 50   | 33     | 27     | 34        | 41        | 217       | 24     | 217    | 0     | 5.1    | 11.46    | 2.87      |
| 100    | 100  | 34     | 26     | 32        | 61        | 237       | 23     | 256    | 0     | 10.2   | 22.85    | 5.72      |
| 200    | 200  | 3943   | 3330   | 8597      | 8978      | 9217      | 23     | 9303   | 0     | 12.3   | 27.5     | 6.88      |
| 500    | 500  | 32824  | 40192  | 43473     | 43844     | 44149     | 34     | 44233  | 0     | 10.3   | 23.1     | 5.78      |
| 1000   | 1000 | 98042  | 109719 | 112278    | 112396    | 112538    | 41     | 112562 | 0     | 8.5    | 19.04    | 4.76      |

#### 3.2 转账

| 并发数 | 样本 | 平均值 | 中位数 | 90%百分位 | 95%百分位 | 99%百分位 | 最小值 | 最大值 | 异常% | 吞吐量 | 接收KB/s | 发送KB /s |
| ------ | ---- | ------ | ------ | --------- | --------- | --------- | ------ | ------ | ----- | ------ | -------- | --------- |
| 50     | 50   | 197    | 113    | 467       | 549       | 861       | 60     | 861    | 0     | 5.1    | 4.45     | 2.01      |
| 100    | 100  | 932    | 932    | 1503      | 1559      | 1625      | 92     | 1644   | 0     | 9.9    | 8.64     | 3.91      |
| 200    | 200  | 6543   | 6631   | 10286     | 10706     | 10816     | 537    | 10837  | 0     | 9.7    | 8.49     | 3.84      |
| 500    | 500  | 21966  | 21967  | 39669     | 40764     | 42359     | 1167   | 42387  | 0     | 9.5    | 8.34     | 3.77      |
| 1000   | 1000 | 54219  | 52079  | 98495     | 103842    | 110892    | 1207   | 111916 | 0     | 8.2    | 7.15     | 3.24      |

#### 3.3 借据录入

| 并发数 | 样本 | 平均值 | 中位数 | 90%百分位 | 95%百分位 | 99%百分位 | 最小值 | 最大值 | 异常% | 吞吐量 | 接收KB/s | 发送KB /s |
| ------ | ---- | ------ | ------ | --------- | --------- | --------- | ------ | ------ | ----- | ------ | -------- | --------- |
| 50     | 50   | 186    | 62     | 677       | 839       | 1276      | 34     | 1276   | 0     | 5.1    | 2.1      | 2.8       |
| 100    | 100  | 128    | 51     | 298       | 510       | 893       | 26     | 926    | 0     | 10.2   | 4.17     | 5.55      |
| 200    | 200  | 5369   | 5561   | 9391      | 9429      | 9616      | 835    | 9684   | 0     | 10.2   | 4.18     | 5.57      |
| 500    | 500  | 21218  | 21184  | 37542     | 40058     | 41229     | 2025   | 41359  | 0     | 9.8    | 4        | 5.33      |
| 1000   | 1000 | 57270  | 55490  | 99807     | 107605    | 110833    | 3883   | 111068 | 0     | 8.3    | 6.07     | 4.52      |

#### 3.4 新增汇票

| 并发数 | 样本 | 平均值 | 中位数 | 90%百分位 | 95%百分位 | 99%百分位 | 最小值 | 最大值 | 异常% | 吞吐量 | 接收KB/s | 发送KB /s |
| ------ | ---- | ------ | ------ | --------- | --------- | --------- | ------ | ------ | ----- | ------ | -------- | --------- |
| 50     | 50   | 188    | 124    | 352       | 532       | 780       | 76     | 780    | 0     | 5.1    | 1.18     | 2.17      |
| 100    | 100  | 298    | 226    | 616       | 707       | 816       | 65     | 829    | 0     | 10     | 2.34     | 4.31      |
| 200    | 200  | 7569   | 7780   | 10687     | 10907     | 11010     | 1014   | 11147  | 0     | 9.9    | 2.31     | 4.25      |
| 500    | 500  | 24662  | 24870  | 41141     | 42076     | 42175     | 3974   | 42321  | 0     | 9.6    | 2.25     | 4.14      |
| 1000   | 1000 | 60431  | 58810  | 103827    | 111141    | 111901    | 10287  | 111950 | 0     | 8.2    | 1.92     | 3.53      |

#### 3.5 查看理财产品购买情况（Lab1实现，本地部署）

| 并发数 | 样本 | 平均值 | 中位数 | 90%百分位 | 95%百分位 | 99%百分位 | 最小值 | 最大值 | 异常% | 吞吐量 | 接收KB/s | 发送KB /s |
| ------ | ---- | ------ | ------ | --------- | --------- | --------- | ------ | ------ | ----- | ------ | -------- | --------- |
| 50     | 50   | 3      | 2      | 6         | 6         | 6         | 1      | 6      | 0     | 5000   | 1919.18  | 0         |
| 100    | 100  | 1      | 1      | 3         | 3         | 4         | 0      | 6      | 0     | 7142.9 | 2727.4   | 0         |
| 200    | 200  | 8      | 6      | 21        | 23        | 26        | 0      | 27     | 0     | 5000   | 1919.18  | 0         |
| 500    | 500  | 9      | 3      | 30        | 40        | 44        | 0      | 60     | 0     | 4629.6 | 1767.76  | 0         |
| 1000   | 1000 | 32     | 9      | 48        | 54        | 513       | 0      | 516    | 0     | 1639.3 | 625.96   | 0         |



### 四、测试结论

对于Lab1中所完成的系统中的查看购买理财产品信息的功能，虽然部署在本地，没有调用远程的资源，并且返回值较少，速度很快，但由于没有做拥塞控制，造并发数较大（＞100）的时候，性能有明显的下降，吞吐量以及接收量随着并发线程的增加二出现大幅度下降；并发数较小（＜100）的时候，系统可以很快的做出反应并没有达到饱和；

对于银行模拟系统来说，在并发数较少（＜峰值）的时候，系统并没有达到饱和，随着并发数增加，吞吐量、发送和接收速度都在增加；并发数较多（＞峰值）的时候，性能只出现了小幅度的下滑，没有Lab1中下滑的那么严重，由此可见应该对高并发有一些处理。对于存款功能来说，峰值约为200； 转账、借据录入、新增汇票的峰值介于100与200之间。因为测试中存在波动，所以可能存在一些误差（借据录入100进程比50进程快、1000进程时接收速率偏高），代表我们可以进一步增强性能测试的稳定性。